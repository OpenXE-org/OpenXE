import{ay as V,aA as k,aD as v,o as A,y,I as m,H as n,ax as a,q as g,a as t,al as b,aF as x,aE as C,m as E,D as $,aG as U}from"../vue-9Z3BxQCl.js";import{a as w,_ as c,r as B}from"../AutoComplete-CkJCahnF.js";import{s as S,a as j}from"../index-DhxMc7A9.js";const N={class:"grid gap-1",style:{"grid-template-columns":"25% 75%"}},H={__name:"Edit",props:{id:String},emits:["save","close"],setup(f,{emit:i}){const p=[{name:"Ähnlich",value:1},{name:"Zubehör",value:2}],s=f,r=i,l=V({active:!0});k(async()=>{if(s.id>0){const d="index.php?module=crossselling&action=edit";l.value=await v.get(d,{params:s}).then(e=>e.data)}});async function u(){!parseInt(s.id)>0&&(l.value.id=0);const d=l.value.id>0?"index.php?module=crossselling&action=edit":"index.php?module=crossselling&action=add";await v.post(d,{...s,...l.value}).then(()=>{r("save")},C)}return(d,e)=>(A(),y(a(x),{visible:"",modal:"",header:"Crossselling-Artikel anlegen/bearbeiten",style:{width:"500px"},"onUpdate:visible":e[8]||(e[8]=o=>r("close"))},{footer:m(()=>[n(a(g),{label:"ABBRECHEN",onClick:e[7]||(e[7]=o=>r("close"))}),n(a(g),{label:"SPEICHERN",onClick:u,disabled:!l.value.type||!l.value.mainArticle||!l.value.connectedArticle},null,8,["disabled"])]),default:m(()=>[n(a(w),null,{default:m(()=>[t("div",N,[e[9]||(e[9]=t("label",{for:"crossselling_type"},"Art:",-1)),n(a(S),{modelValue:l.value.type,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.type=o),options:p,"option-label":"name","option-value":"value"},null,8,["modelValue"]),e[10]||(e[10]=t("label",{for:"crossselling_mainArticle"},"Artikel:",-1)),n(c,{"input-id":"crossselling_mainArticle",modelValue:l.value.mainArticle,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.mainArticle=o),"option-label":o=>[o.nummer,o.name].join(" "),"ajax-filter":"artikelnummer","force-selection":""},null,8,["modelValue","option-label"]),e[11]||(e[11]=t("label",{for:"crossselling_connectedArticle"},"Crossselling Artikel:",-1)),n(c,{"input-id":"crossselling_connectedArticle",modelValue:l.value.connectedArticle,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.connectedArticle=o),"option-label":o=>[o.nummer,o.name].join(" "),"ajax-filter":"artikelnummer","force-selection":""},null,8,["modelValue","option-label"]),e[12]||(e[12]=t("label",{for:"crossselling_shop"},"Shop:",-1)),n(c,{"input-id":"crossselling_shop",modelValue:l.value.shop,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.shop=o),"option-label":"bezeichnung","ajax-filter":"shopnameid"},null,8,["modelValue"]),e[13]||(e[13]=t("label",{for:"crossselling_sort"},"Sortierung:",-1)),n(a(j),{modelValue:l.value.sort,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.sort=o),"input-id":"crossselling_sort","show-buttons":""},null,8,["modelValue"]),e[14]||(e[14]=t("label",{for:"crossselling_bidirectional"},"Bidirektionale Zuweisung:",-1)),n(a(b),{modelValue:l.value.bidirectional,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.bidirectional=o),binary:""},null,8,["modelValue"]),e[15]||(e[15]=t("label",{for:"crossselling_group_active"},"Aktiv:",-1)),n(a(b),{modelValue:l.value.active,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.active=o),binary:""},null,8,["modelValue"])])]),_:1})]),_:1}))}},I={__name:"App",setup(f){const i=V(null);document.getElementById("main").addEventListener("click",async r=>{const l=r.target;if(!l||!l.classList.contains("vueAction"))return;const u=l.dataset;if(u.action==="delete"){if(!confirm("Wirklich löschen?"))return;await v.post("index.php?module=crossselling&action=delete",{id:u.id}),p();return}i.value=u});function p(){B(),s()}function s(){i.value=null}return(r,l)=>i.value?(A(),y(H,E({key:0},i.value,{onClose:s,onSave:p}),null,16)):$("",!0)}};U(I).mount("#vueapp");
