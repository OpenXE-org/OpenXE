import{aA as V,aC as k,aF as v,o as A,y,I as m,H as o,az as a,q as g,a as t,S as x,W as C,an as b,aH as $,aG as E,m as U,D as w,aI as B}from"../vue-DSfpzftO.js";import{a as S,_ as c,r as j}from"../AutoComplete-CD2Jtc1x.js";const H={class:"grid gap-1",style:{"grid-template-columns":"25% 75%"}},I={__name:"Edit",props:{id:String},emits:["save","close"],setup(f,{emit:i}){const p=[{name:"Ähnlich",value:1},{name:"Zubehör",value:2}],s=f,r=i,l=V({active:!0});k(async()=>{if(s.id>0){const d="index.php?module=crossselling&action=edit";l.value=await v.get(d,{params:s}).then(e=>e.data)}});async function u(){!parseInt(s.id)>0&&(l.value.id=0);const d=l.value.id>0?"index.php?module=crossselling&action=edit":"index.php?module=crossselling&action=add";await v.post(d,{...s,...l.value}).then(()=>{r("save")},E)}return(d,e)=>(A(),y(a($),{visible:"",modal:"",header:"Crossselling-Artikel anlegen/bearbeiten",style:{width:"500px"},"onUpdate:visible":e[8]||(e[8]=n=>r("close"))},{footer:m(()=>[o(a(g),{label:"ABBRECHEN",onClick:e[7]||(e[7]=n=>r("close"))}),o(a(g),{label:"SPEICHERN",onClick:u,disabled:!l.value.type||!l.value.mainArticle||!l.value.connectedArticle},null,8,["disabled"])]),default:m(()=>[o(a(S),null,{default:m(()=>[t("div",H,[e[9]||(e[9]=t("label",{for:"crossselling_type"},"Art:",-1)),o(a(x),{modelValue:l.value.type,"onUpdate:modelValue":e[0]||(e[0]=n=>l.value.type=n),options:p,"option-label":"name","option-value":"value"},null,8,["modelValue"]),e[10]||(e[10]=t("label",{for:"crossselling_mainArticle"},"Artikel:",-1)),o(c,{"input-id":"crossselling_mainArticle",modelValue:l.value.mainArticle,"onUpdate:modelValue":e[1]||(e[1]=n=>l.value.mainArticle=n),"option-label":n=>[n.nummer,n.name].join(" "),"ajax-filter":"artikelnummer","force-selection":""},null,8,["modelValue","option-label"]),e[11]||(e[11]=t("label",{for:"crossselling_connectedArticle"},"Crossselling Artikel:",-1)),o(c,{"input-id":"crossselling_connectedArticle",modelValue:l.value.connectedArticle,"onUpdate:modelValue":e[2]||(e[2]=n=>l.value.connectedArticle=n),"option-label":n=>[n.nummer,n.name].join(" "),"ajax-filter":"artikelnummer","force-selection":""},null,8,["modelValue","option-label"]),e[12]||(e[12]=t("label",{for:"crossselling_shop"},"Shop:",-1)),o(c,{"input-id":"crossselling_shop",modelValue:l.value.shop,"onUpdate:modelValue":e[3]||(e[3]=n=>l.value.shop=n),"option-label":"bezeichnung","ajax-filter":"shopnameid"},null,8,["modelValue"]),e[13]||(e[13]=t("label",{for:"crossselling_sort"},"Sortierung:",-1)),o(a(C),{modelValue:l.value.sort,"onUpdate:modelValue":e[4]||(e[4]=n=>l.value.sort=n),"input-id":"crossselling_sort","show-buttons":""},null,8,["modelValue"]),e[14]||(e[14]=t("label",{for:"crossselling_bidirectional"},"Bidirektionale Zuweisung:",-1)),o(a(b),{modelValue:l.value.bidirectional,"onUpdate:modelValue":e[5]||(e[5]=n=>l.value.bidirectional=n),binary:""},null,8,["modelValue"]),e[15]||(e[15]=t("label",{for:"crossselling_group_active"},"Aktiv:",-1)),o(a(b),{modelValue:l.value.active,"onUpdate:modelValue":e[6]||(e[6]=n=>l.value.active=n),binary:""},null,8,["modelValue"])])]),_:1})]),_:1}))}},N={__name:"App",setup(f){const i=V(null);document.getElementById("main").addEventListener("click",async r=>{const l=r.target;if(!l||!l.classList.contains("vueAction"))return;const u=l.dataset;if(u.action==="delete"){if(!confirm("Wirklich löschen?"))return;await v.post("index.php?module=crossselling&action=delete",{id:u.id}),p();return}i.value=u});function p(){j(),s()}function s(){i.value=null}return(r,l)=>i.value?(A(),y(I,U({key:0},i.value,{onClose:s,onSave:p}),null,16)):w("",!0)}};B(N).mount("#vueapp");
