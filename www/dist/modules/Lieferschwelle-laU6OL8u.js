import{ay as b,aA as C,aD as m,o as y,y as w,I as p,H as o,ax as u,q as f,a as d,p as g,al as V,aF as x,aE as E,m as h,D as A,aG as k}from"../vue-9Z3BxQCl.js";import{a as _,_ as v,r as $}from"../AutoComplete-CkJCahnF.js";const I={class:"grid gap-1",style:{"grid-template-columns":"25% 75%"}},U={__name:"Edit",props:{id:String},emits:["save","close"],setup(c,{emit:i}){const n=c,s=i,l=b({active:!0});C(async()=>{if(n.id>0){const a="index.php?module=lieferschwelle&action=edit";l.value=await m.get(a,{params:n}).then(e=>e.data)}});async function r(){!parseInt(n.id)>0&&(l.value.id=0);const a=l.value.id>0?"index.php?module=lieferschwelle&action=edit":"index.php?module=lieferschwelle&action=add";await m.post(a,{...n,...l.value}).then(()=>{s("save")},E)}return(a,e)=>(y(),w(u(x),{visible:"",modal:"",header:"Lieferschwelle anlegen/bearbeiten",style:{width:"500px"},"onUpdate:visible":e[5]||(e[5]=t=>s("close"))},{footer:p(()=>[o(u(f),{label:"ABBRECHEN",onClick:e[4]||(e[4]=t=>s("close"))}),o(u(f),{label:"SPEICHERN",onClick:r,disabled:!l.value.destinationCountry},null,8,["disabled"])]),default:p(()=>[o(u(_),null,{default:p(()=>[d("div",I,[e[6]||(e[6]=d("label",{for:"lieferschwelle_originCountry"},"Ursprungsland:",-1)),o(v,{"input-id":"lieferschwelle_originCountry",modelValue:l.value.originCountry,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.originCountry=t),"option-label":t=>[t.isoAlpha2,t.nameGerman].join(" "),"ajax-filter":"laender","force-selection":""},null,8,["modelValue","option-label"]),e[7]||(e[7]=d("label",{for:"lieferschwelle_destinationCountry"},"Empfängerland:",-1)),o(v,{"input-id":"lieferschwelle_destinationCountry",modelValue:l.value.destinationCountry,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.destinationCountry=t),"option-label":t=>[t.isoAlpha2,t.nameGerman].join(" "),"ajax-filter":"laender","force-selection":""},null,8,["modelValue","option-label"]),e[8]||(e[8]=d("label",{for:"lieferschwelle_ustid"},"USt-ID:",-1)),o(u(g),{modelValue:l.value.ustId,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.ustId=t),"input-id":"lieferschwelle_ustid","show-buttons":""},null,8,["modelValue"]),e[9]||(e[9]=d("label",{for:"lieferschwelle_active"},"Aktiv:",-1)),o(u(V),{modelValue:l.value.active,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.active=t),binary:""},null,8,["modelValue"])])]),_:1})]),_:1}))}},B={__name:"App",setup(c){const i=b(null);document.getElementById("main").addEventListener("click",async l=>{const r=l.target;if(!r||!r.classList.contains("vueAction"))return;const a=r.dataset;if(a.action==="delete"){if(!confirm("Wirklich löschen?"))return;await m.post("index.php?module=lieferschwelle&action=delete",{id:a.id}),n();return}i.value=a});function n(){$(),s()}function s(){i.value=null}return(l,r)=>i.value?(y(),w(U,h({key:0},i.value,{onClose:s,onSave:n}),null,16)):A("",!0)}};k(B).mount("#vueapp");
